<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Newming 的个人博客笔记文档，Newming 的前端笔记，Newming 的前端博客文章"><title>dom 知识汇总 | 前端资源部</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ad4570b1386e79a9e6a7ec30f923e06d";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">dom 知识汇总</h1><a id="logo" href="/.">前端资源部</a><p class="description">Newming 的前端笔记</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Newming"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">dom 知识汇总</h1><div class="post-meta"><a href="/2017/12/26/dom-model/#comments" class="comment-count"><i id="changyan_count_unit" data-xid="2017/12/26/dom-model/"></i>留言,<i id="changyan_parti_unit" data-xid="2017/12/26/dom-model/"></i>参与</a><p><span class="date">Dec 26, 2017</span><span><a href="/categories/前端/" class="category">前端</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>DOM: Document object model 文档对象模型，描述整个html页面中节点关系的谱图。熟练操作 DOM 在我们的日常开发中非常重要。</p>
<h1 id="js-DOM元素获取的方法-8种"><a href="#js-DOM元素获取的方法-8种" class="headerlink" title="js DOM元素获取的方法(8种)"></a>js DOM元素获取的方法(8种)</h1><h3 id="document-getElementById-‘id’"><a href="#document-getElementById-‘id’" class="headerlink" title="document.getElementById(‘id’)"></a>document.getElementById(‘id’)</h3><p>通过id获取元素，如果id重复了，获取到的是第一个，区分大小写（在 IE 6,7中不区分）</p>
<p>在 IE 6,7 中会把元素的 name 当作 id 来使用</p>
<p>如果没有获取到则返回 null,可以用id直接代表这个对象，而不去提前获取。上下文只能是 document<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// html</span></div><div class="line">&lt;p id=<span class="string">'test'</span>&gt;js中可以直接通过id拿到我&lt;<span class="regexp">/p&gt;</span></div><div class="line"><span class="regexp">/</span><span class="regexp">/ js</span></div><div class="line"><span class="regexp">console.log(test);</span></div></pre></td></tr></table></figure></p>
<h3 id="context-getElementsByTagName-‘li’"><a href="#context-getElementsByTagName-‘li’" class="headerlink" title="context.getElementsByTagName(‘li’)"></a>context.getElementsByTagName(‘li’)</h3><p>通过元素的标签名获取一组元素，有几个获取几个。可以根据上下文(context)获取我们获取元素的范围。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">'li'</span>);</div><div class="line">oDIv.getElementsByTagName(<span class="string">'li'</span>);</div></pre></td></tr></table></figure>
<h3 id="document-getElementsByName-‘text’"><a href="#document-getElementsByName-‘text’" class="headerlink" title="document.getElementsByName(‘text’)"></a>document.getElementsByName(‘text’)</h3><p>通过元素的name属性获取一组元素</p>
<p>注意在 IE浏览器下只对表单元素起作用。这个方法常用于获取具有相同name的表单元素</p>
<h3 id="context-getElementsByClassName-‘class’"><a href="#context-getElementsByClassName-‘class’" class="headerlink" title="context.getElementsByClassName(‘class’)"></a>context.getElementsByClassName(‘class’)</h3><p>在 IE 6~8 会报错</p>
<h3 id="document-documentElement-document-body"><a href="#document-documentElement-document-body" class="headerlink" title="document.documentElement,document.body"></a>document.documentElement,document.body</h3><p>分别获取 html,body 元素，通常用来获取文档属性<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> winW = <span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth <span class="comment">// 兼容所有的浏览器获取当前浏览器宽度</span></div></pre></td></tr></table></figure></p>
<h3 id="document-querySelector-document-querySelectorAll"><a href="#document-querySelector-document-querySelectorAll" class="headerlink" title="document.querySelector,document.querySelectorAll"></a>document.querySelector,document.querySelectorAll</h3><p>在移动端常用的方法，IE6～8不支持。同时不存在映射关系</p>
<p>前者只获取一个元素，后者获取全部<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">document</span>.querySelector(<span class="string">'#id'</span>)</div><div class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.class'</span>)</div><div class="line"><span class="built_in">document</span>.querySelector(<span class="string">'li'</span>)</div><div class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">'#id li'</span>) <span class="comment">// 后代选择器</span></div><div class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">"input[type='text']"</span>) <span class="comment">// 属性选择器</span></div></pre></td></tr></table></figure></p>
<h1 id="DOM-中的节点和关系属性"><a href="#DOM-中的节点和关系属性" class="headerlink" title="DOM 中的节点和关系属性"></a>DOM 中的节点和关系属性</h1><p><a href="http://www.w3school.com.cn/jsref/dom_obj_all.asp" target="_blank" rel="external">w3chool的文档</a></p>
<h3 id="获取关系的属性"><a href="#获取关系的属性" class="headerlink" title="获取关系的属性"></a>获取关系的属性</h3><p>节点：node 一个html页面中的元素标签、文本、注释。。。都是节点。在标准浏览器下，空格和Enter（回车）都是文本节点<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line">oBox.childNodes <span class="comment">// 获取所有的子节点</span></div><div class="line">oBox.children <span class="comment">// 获取所有的元素子节点</span></div><div class="line">oBox.parentNode <span class="comment">// 获取元素的父亲节点</span></div><div class="line">oBox.previousSibling <span class="comment">// 获取元素位于相同节点树层级的前一个元素，注意空格回车文本节点也会获取。(哥哥)</span></div><div class="line">oBox.nextSibling <span class="comment">// 获取元素位于相同节点树层级的后一个元素。(弟弟)</span></div><div class="line">oBox.firstChild <span class="comment">// 获取第一个子元素</span></div><div class="line">oBox.lastChild <span class="comment">// 获取元素的最后一个</span></div></pre></td></tr></table></figure></p>
<h3 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h3><p>主要的节点类型及其属性。</p>
<table>
<thead>
<tr>
<th style="text-align:left">节点类型</th>
<th style="text-align:left">nodeType</th>
<th>nodeName</th>
<th>nodeValue</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">元素节点（元素标签）</td>
<td style="text-align:left">1</td>
<td>大写的标签名</td>
<td>null</td>
</tr>
<tr>
<td style="text-align:left">文本节点（文字）</td>
<td style="text-align:left">3</td>
<td>#text</td>
<td>文字内容</td>
</tr>
<tr>
<td style="text-align:left">注释节点</td>
<td style="text-align:left">8</td>
<td>#comment</td>
<td>注释内容</td>
</tr>
<tr>
<td style="text-align:left">document</td>
<td style="text-align:left">9</td>
<td>#document</td>
<td>null</td>
</tr>
</tbody>
</table>
<h4 id="小案例，模拟children方法"><a href="#小案例，模拟children方法" class="headerlink" title="小案例，模拟children方法"></a>小案例，模拟children方法</h4><p>模拟children方法，实现获取指定元素下所有的元素子节点</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 1. 获取 children 标签元素 可以设置筛选</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getChildren</span>(<span class="params">ele,tagName</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> ary = [];</div><div class="line">  <span class="keyword">var</span> nodes = ele.childNodes; <span class="comment">// 拿到元素下所有的子节点</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; nodes.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> cur = nodes[i];</div><div class="line">    <span class="keyword">if</span> (cur.nodeType===<span class="number">1</span>) &#123;</div><div class="line">      <span class="keyword">if</span> (tagName) &#123;</div><div class="line">        <span class="comment">// 如果传了tagName，再次筛选</span></div><div class="line">        <span class="keyword">if</span> (cur.nodeName.toLowerCase() === tagName.toLowerCase()) &#123;</div><div class="line">          <span class="comment">// 注意nodeName是大写，但是传入的参数不确定，所有先都转为小写</span></div><div class="line">          ary.push(cur)</div><div class="line">        &#125;</div><div class="line">      &#125;<span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// 如果没传tagName，默认将所有的子元素节点返回</span></div><div class="line">        ary.push(cur)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> ary;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> box = <span class="built_in">document</span>.getElementById(<span class="string">'box'</span>);</div><div class="line">getChildren(<span class="built_in">document</span>.getElementById(box, <span class="string">'p'</span>))</div><div class="line"></div><div class="line"><span class="comment">// 2. 获取 children 标签元素 可以设置筛选，根据兼容处理</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">childern</span> (<span class="params">curEle, tagName</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> ary = []</div><div class="line">  <span class="keyword">if</span> (<span class="regexp">/MSIE (6|7|8)/i</span>.test(navigator.userAgent)) &#123;</div><div class="line">    <span class="keyword">var</span> nodes = ele.childNodes;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; nodes.length; i++) &#123;</div><div class="line">      <span class="keyword">var</span> cur = nodes[i];</div><div class="line">      <span class="keyword">if</span> (cur.nodeType === <span class="number">1</span>) &#123;</div><div class="line">        ary.push(cur)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    nodes = <span class="literal">null</span></div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    ary = <span class="built_in">Array</span>.prototype.slice.call(curEle.children)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> tagName === <span class="string">'string'</span>) &#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">0</span>; k &lt; ary.length; k++) &#123;</div><div class="line">      <span class="keyword">var</span> curEle = ary[k]</div><div class="line">      <span class="keyword">if</span> (curEle.nodeName.toLowerCase() !== tagName.toLowerCase()) &#123;</div><div class="line">        ary.splice(k, <span class="number">1</span>)</div><div class="line">        k--</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> ary</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="小案例，获取siblings"><a href="#小案例，获取siblings" class="headerlink" title="小案例，获取siblings"></a>小案例，获取siblings</h4><p>html 结构<br><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- 我是注释 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">'li3'</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 如何通过js获取到3的上一个兄弟2 --&gt;</span></div><div class="line"><span class="comment">&lt;!-- 需要注意原生的 DOM 属性 previousSibling 会计算空格和回车还有注释等，所以往上找多少级不确定 --&gt;</span></div></pre></td></tr></table></figure></p>
<p>js 代码<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 1.获取上一个兄弟节点，兼容IE</span></div><div class="line"><span class="keyword">var</span> li3 = <span class="built_in">document</span>.getElementById(<span class="string">'li3'</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">prev</span>(<span class="params">ele</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> pre = ele.previousSibling;</div><div class="line">  <span class="keyword">while</span> (pre &amp;&amp; pre.nodeType !== <span class="number">1</span>) &#123;</div><div class="line">    pre = pre.previousSibling;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> pre</div><div class="line">&#125;</div><div class="line">prev(li3)</div><div class="line"></div><div class="line"><span class="comment">// 2. 获取上一个兄弟节点，previousElementSibling 标准浏览器</span></div><div class="line"></div><div class="line"><span class="comment">// 3.获取所有的上级兄弟节点</span></div><div class="line"><span class="keyword">var</span> li3 = <span class="built_in">document</span>.getElementById(<span class="string">'li3'</span>)</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">prevAll</span>(<span class="params">ele</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> ary = [];</div><div class="line">  <span class="keyword">var</span> pre = ele.previousSibling;</div><div class="line">  <span class="keyword">while</span> (pre) &#123;</div><div class="line">    <span class="keyword">if</span> (pre.nodeType === <span class="number">1</span>) &#123;</div><div class="line">      ary.unshift(pre)</div><div class="line">    &#125;</div><div class="line">    pre = pre.previousSibling;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> ary</div><div class="line">&#125;</div><div class="line">prevAll(li3)</div><div class="line"></div><div class="line"><span class="comment">// 4. 获取当前元素的索引</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params">curEle</span>) </span>&#123;</div><div class="line">  <span class="comment">// 有几个哥哥就是几</span></div><div class="line">  <span class="keyword">var</span> ary = [];</div><div class="line">  <span class="keyword">var</span> pre = curEle.previousElementSibling;</div><div class="line">  <span class="keyword">while</span> (pre) &#123;</div><div class="line">    ary.unshift(pre)</div><div class="line">    pre = pre.previousElementSibling;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> ary.length</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 5. firstchild 第一个元素节点</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">firstChild</span> (<span class="params">parentNode</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> parentNode.children[<span class="number">0</span>] ? parentNode.children[<span class="number">0</span>] : <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="DOM-增删改"><a href="#DOM-增删改" class="headerlink" title="DOM 增删改"></a>DOM 增删改</h3><ul>
<li>document.createElement(‘div’); 动态创建一个标签元素</li>
<li>box.appendChild() 将元素添加到指定的容器中的末尾</li>
<li>insertBefore(newItem,existingItem) 把新的元素插入到老得元素之前，如果老元素不存在，会放到末尾</li>
<li>removeChild(item) 删除元素</li>
<li>cloneNode(true || false) 克隆元素默认false只克隆当前元素，true clone 子孙</li>
<li>replaceChild(newnode,oldnode)</li>
<li>document.createDocumentFragment() 创建文档碎片</li>
</ul>
<p>属性的增删改查</p>
<ul>
<li>setAttribute()</li>
<li>getAttribute()</li>
<li>removeAttribute() 在IE 6~8 中不能修改class属性 box.className可以</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 1. append</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">append</span> (<span class="params">newEle, container</span>) </span>&#123;</div><div class="line">  container.appendChild(newEle)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 2. prepend</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">prepend</span> (<span class="params">newEle, container</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> firstChild = container.children[<span class="number">0</span>] ? parentNode.children[<span class="number">0</span>] : <span class="literal">null</span></div><div class="line">  container.insertBefore(newEle, firstChild)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 3. insertBefore</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertBefore</span> (<span class="params">newEle, oldEle</span>) </span>&#123;</div><div class="line">  oldEle.parentNode.insertBefore(newEle, oldEle)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 4. insertAfter</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertAfter</span> (<span class="params">newEle, oldEle</span>) </span>&#123;</div><div class="line">  oldEle.parentNode.insertBefore(newEle, oldEle.nextElementSibling)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="dom-数据绑定方法"><a href="#dom-数据绑定方法" class="headerlink" title="dom 数据绑定方法"></a>dom 数据绑定方法</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 1. 通过 document.createElement 进行创建插入，会造成多次 dom 回流，即重新渲染 dom，造成性能浪费，不影响原有的 dom</span></div><div class="line"><span class="built_in">document</span>.createElement</div><div class="line"><span class="built_in">document</span>.appendChild</div><div class="line"></div><div class="line"><span class="comment">// 2. 字符串拼接，只需要一次回流，但是会造成原有的 dom 丢失事件绑定</span></div><div class="line"><span class="keyword">var</span> str = <span class="string">'&lt;span&gt;aa&lt;/span&gt;'</span></div><div class="line">box.innerHTML = str</div><div class="line"></div><div class="line"><span class="comment">// 3. 文档碎片</span></div><div class="line"><span class="keyword">var</span> frg = <span class="built_in">document</span>.createDocumentFragment() <span class="comment">// 创建一个文档碎片相当于临时创建了一个容器</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</div><div class="line">  <span class="keyword">var</span> oLi = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>)</div><div class="line">  oLi.innerHTML = i</div><div class="line">  frg.appendChild(oLi)</div><div class="line">&#125;</div><div class="line">oUl.appendChild(frg) <span class="comment">// 优点:不影响原有 li，一次回流</span></div><div class="line">frg = <span class="literal">null</span></div></pre></td></tr></table></figure>
<h3 id="操作元素-class-属性"><a href="#操作元素-class-属性" class="headerlink" title="操作元素 class 属性"></a>操作元素 class 属性</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 1. hasClass 是否包含某个class，可以直接用 dom.classList.contains</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasClass</span> (<span class="params">curEle, className</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(^|\\s)'</span> + className + <span class="string">'(\\s|$)'</span>)</div><div class="line">  <span class="comment">// var reg = new RegExp('(^| +)' + className + '( +|$)')</span></div><div class="line">  <span class="keyword">return</span> reg.test(curEle.className)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 2. addClass支持传多个class，以空格隔开，可以直接用 dom.classList.add(class,class,...)，不过存在兼容问题</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">curEle, className</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> ary = className.replace(<span class="regexp">/(^ +| +$)/g</span>, <span class="string">''</span>).split(<span class="regexp">/ +/g</span>) <span class="comment">// split(' ')</span></div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; ary.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> curClass = ary[i]</div><div class="line">    <span class="keyword">if</span> (!hasClass(curEle, curClass)) &#123;</div><div class="line">      curEle.className += <span class="string">' '</span> + curClass</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 3. removeClass，支持传多个class，以空格隔开，可以直接用 dom.classList.remove(class, class, ...)，不过存在兼容问题</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeClass</span>(<span class="params">curEle, className</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> ary = className.replace(<span class="regexp">/(^ +| +$)/g</span>, <span class="string">''</span>).split(<span class="regexp">/ +/g</span>)</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; ary.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> curClass = ary[i]</div><div class="line">    <span class="keyword">if</span> (hasClass(curEle, curClass)) &#123;</div><div class="line">      <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(^| +)'</span> + curClass + <span class="string">'( +|$)'</span>, <span class="string">'g'</span>)</div><div class="line">      curEle.className = curEle.className.replace(reg, <span class="string">' '</span>).trim()</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="getElementsByClassName-的兼容处理"><a href="#getElementsByClassName-的兼容处理" class="headerlink" title="getElementsByClassName 的兼容处理"></a>getElementsByClassName 的兼容处理</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// className: 要获取的元素的样式类名，可能一个也可能多个，多个之间用空格（几个都行）隔开</span></div><div class="line"><span class="comment">// context: 获取元素的上下文，不传的话默认为 document</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getElementsByClass</span> (<span class="params">className, context</span>) </span>&#123;</div><div class="line">  context = context || <span class="built_in">document</span></div><div class="line">  <span class="keyword">var</span> classNameAry = className.replace(<span class="regexp">/(^ +| +$)/g</span>, <span class="string">''</span>).split(<span class="regexp">/ +/g</span>)</div><div class="line">  <span class="comment">// 获取上下文包含的所有标签</span></div><div class="line">  <span class="keyword">var</span> nodeList = context.getElementsByTagName(<span class="string">'*'</span>)</div><div class="line">  <span class="keyword">var</span> ary = []</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; nodeList.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> curNode = nodeList[i]</div><div class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">0</span>; k &lt; classNameAry.length; k++) &#123;</div><div class="line">      <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(^| +)'</span> + classNameAry[k] + <span class="string">'( +|$)'</span>)</div><div class="line">      <span class="keyword">if</span> (!reg.test(curNode.className)) &#123;</div><div class="line">        flag = <span class="literal">false</span></div><div class="line">        <span class="keyword">break</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (flag) &#123;</div><div class="line">      ary.push(curNode)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="操作浏览器属性"><a href="#操作浏览器属性" class="headerlink" title="操作浏览器属性"></a>操作浏览器属性</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 两个参数，只传一个是获取，两个是设置</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">win</span> (<span class="params">attr, val</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> val === <span class="string">'undefined'</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.documentElement[attr] || <span class="built_in">document</span>.body[attr]</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">document</span>.documentElement[attr] = val</div><div class="line">    <span class="built_in">document</span>.body[attr] = val</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="获取元素样式属性值"><a href="#获取元素样式属性值" class="headerlink" title="获取元素样式属性值"></a>获取元素样式属性值</h3><ol>
<li>元素.style.属性：样式必须写在行内样式(不常用)</li>
<li>通过 window 提供的一个方法 getComputedStyle 来获取所有经过浏览器计算过的（只要当前元素标签可以在页面中呈现出来，那么它的样式都是经过浏览器的计算／渲染过的，哪怕有些样式没有写，同样可以获取）样式属性。IE 6,7,8 不兼容</li>
<li>在 IE 6,7,8 下使用 currentStyle 来获取元素的样式属性，不支持伪类 box.currentStyle[attr]</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 第一个参数是要获取的 dom 元素，第二个是伪类，一般不用，获取到的是当前元素的所有的样式</span></div><div class="line"><span class="built_in">window</span>.getComputedStyle(<span class="string">'元素'</span>, <span class="string">'伪类'</span>)[attr]</div><div class="line"></div><div class="line"><span class="comment">// 兼容，不同浏览器获取到的属性不一定相同，主要是 IE 的其他的问题</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyle</span> (<span class="params">element, attr</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> val = <span class="literal">null</span></div><div class="line">  <span class="keyword">if</span> (<span class="string">'getComputedStyle'</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</div><div class="line">    val = <span class="built_in">window</span>.getComputedStyle(element)[attr]</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// IE 6,7,8</span></div><div class="line">    <span class="keyword">if</span> (attr === <span class="string">'opacity'</span>) &#123;</div><div class="line">      val = element.currentStyle[<span class="string">'filter'</span>] <span class="comment">// 将数字除以 100 为标准浏览器的 opacity</span></div><div class="line">      <span class="keyword">let</span> reg = <span class="regexp">/^alpha\(opacity=(\d+(?:\.\d+)?)\)$/i</span> <span class="comment">// 第二次升级：匹配 0-100 的整数或小数，将第一个分组捕获，?: 只匹配不捕获</span></div><div class="line">      val = reg.test(val) ? reg.exec(val)[<span class="number">1</span>] / <span class="number">100</span> : <span class="number">1</span></div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      val = element.currentStyle[attr]</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">let</span> reg = <span class="regexp">/^(-?\d+(\.\d+)?)(px|pt|rem|em)?$/i</span> <span class="comment">// 第一次升级：去掉数值单位，数字开头px,pt等单位结尾的单个数值</span></div><div class="line">  <span class="keyword">return</span> reg.test(val) ? <span class="built_in">parseFloat</span>(val) : val</div><div class="line">&#125;</div><div class="line">getStyle(box, <span class="string">'width'</span>) <span class="comment">// 需要去掉单位的功能</span></div><div class="line">getStyle(box, <span class="string">'opacity'</span>) <span class="comment">// IE 6-8 不设置这个属性，设置的是 filter: alpha(opacity=10)</span></div></pre></td></tr></table></figure>
<h3 id="修改-dom-样式"><a href="#修改-dom-样式" class="headerlink" title="修改 dom 样式"></a>修改 dom 样式</h3><p>在 js 中给元素设置样式属性值，我们只能通过 dom.style[attr] = value 这种方式给当前元素设置行内样式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 1. 单个样式设置。某些传递进来的值没有单位，把默认单位补上</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCss</span> (<span class="params">curEle, attr, value</span>) </span>&#123;</div><div class="line">  <span class="comment">// 兼容 float 样式值</span></div><div class="line">  <span class="keyword">if</span> (attr === <span class="string">'float'</span>) &#123;</div><div class="line">    curEle[<span class="string">'style'</span>][<span class="string">'cssFloat'</span>] = value</div><div class="line">    curEle[<span class="string">'style'</span>][<span class="string">'styleFloat'</span>] = value</div><div class="line">    <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// 兼容 opacity</span></div><div class="line">  <span class="keyword">if</span> (attr === <span class="string">'opacity'</span>) &#123;</div><div class="line">    curEle[<span class="string">'style'</span>][attr] = value</div><div class="line">    curEle[<span class="string">'style'</span>][<span class="string">'filter'</span>] = <span class="string">'alpha(opacity='</span> + value * <span class="number">100</span> + <span class="string">')'</span> </div><div class="line">    <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> reg = <span class="regexp">/^(width|height|top|bottom|left|right|((margin|padding)(Top|Bottom|Left|Right)?))$/</span></div><div class="line">  <span class="keyword">if</span> (reg.test(attr)) &#123;</div><div class="line">    <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(value)) &#123;</div><div class="line">      value += <span class="string">'px'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  curEle[<span class="string">'style'</span>][attr] = value</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 2. 批量设置样式</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setGroupCss</span> (<span class="params">curEle, options</span>) </span>&#123;</div><div class="line">  options = options || <span class="number">0</span> <span class="comment">// 防止没传值的时候调用 toString 方法出错</span></div><div class="line">  <span class="comment">// 检测 options 的数据类型</span></div><div class="line">  <span class="keyword">if</span> (options.toString() !== <span class="string">'[object Object]'</span>) &#123;</div><div class="line">    <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> options) &#123;</div><div class="line">    <span class="keyword">if</span> (options.hasOwnProperty(key)) &#123;</div><div class="line">      <span class="keyword">this</span>.setCss(curEle, key, options[key])</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 3. 模拟 jquery 中的 css 方法。实现获取，单独设置，批量设置元素的样式</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">css</span> (<span class="params">curEle</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> argTwo = <span class="built_in">arguments</span>[<span class="number">1</span>]</div><div class="line">  <span class="keyword">var</span> ary = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>)</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> argTwo === <span class="string">'string'</span>) &#123;</div><div class="line">    <span class="keyword">var</span> argThree = <span class="built_in">arguments</span>[<span class="number">2</span>]</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> argThree === <span class="string">'undefined'</span>) &#123;</div><div class="line">      <span class="comment">// 第三个参数可能是数字 0，所以这里必须是 undefined</span></div><div class="line">      <span class="keyword">return</span> getStyle(curEle, argTwo)</div><div class="line">    &#125;</div><div class="line">    setCss.apply(curEle, ary)</div><div class="line">    <span class="comment">// this.setCss(curEle, argTwo, argThree)</span></div><div class="line">    <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line">  <span class="comment">// 设置多个样式</span></div><div class="line">  argTwo = argTwo || <span class="number">0</span></div><div class="line">  <span class="keyword">if</span> (argTwo.toString() === <span class="string">'[object Object]'</span>) &#123;</div><div class="line">    setGroupCss.apply(curEle, ary)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div><div class="tags"><a href="/tags/js/">js</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2017/12/27/tail/" class="pre">tail 命令</a><a href="/2017/12/23/enable-mysite-https/" class="next">网站升级 HTTPS</a></div><div id="comments"><div id="SOHUCS" sid="2017/12/26/dom-model/"></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#js-DOM元素获取的方法-8种"><span class="toc-text">js DOM元素获取的方法(8种)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#document-getElementById-‘id’"><span class="toc-text">document.getElementById(‘id’)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#context-getElementsByTagName-‘li’"><span class="toc-text">context.getElementsByTagName(‘li’)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#document-getElementsByName-‘text’"><span class="toc-text">document.getElementsByName(‘text’)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#context-getElementsByClassName-‘class’"><span class="toc-text">context.getElementsByClassName(‘class’)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#document-documentElement-document-body"><span class="toc-text">document.documentElement,document.body</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#document-querySelector-document-querySelectorAll"><span class="toc-text">document.querySelector,document.querySelectorAll</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DOM-中的节点和关系属性"><span class="toc-text">DOM 中的节点和关系属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#获取关系的属性"><span class="toc-text">获取关系的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#节点"><span class="toc-text">节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#小案例，模拟children方法"><span class="toc-text">小案例，模拟children方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#小案例，获取siblings"><span class="toc-text">小案例，获取siblings</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DOM-增删改"><span class="toc-text">DOM 增删改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dom-数据绑定方法"><span class="toc-text">dom 数据绑定方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#操作元素-class-属性"><span class="toc-text">操作元素 class 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getElementsByClassName-的兼容处理"><span class="toc-text">getElementsByClassName 的兼容处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#操作浏览器属性"><span class="toc-text">操作浏览器属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取元素样式属性值"><span class="toc-text">获取元素样式属性值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改-dom-样式"><span class="toc-text">修改 dom 样式</span></a></li></ol></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/01/26/deep-compare/">deep-compare</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/02/mongoose/">mongoose 简易教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/02/mongodb/">mongodb 数据库</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/27/tail/">tail 命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/26/dom-model/">dom 知识汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/23/enable-mysite-https/">网站升级 HTTPS</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/19/position-sticky/">position-sticky</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/15/custom-range-style/">自定义 range input 样式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/03/words-for-it/">IT 必备词汇</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/21/arrsort/">数组排序算法</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/文章/">文章</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/网站/">网站</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/mongodb/" style="font-size: 15px;">mongodb</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/English/" style="font-size: 15px;">English</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.newming.cn/" title="个人网站" target="_blank">个人网站</a><ul></ul><a href="https://github.com/newming" title="github" target="_blank">github</a><ul></ul><a href="https://coding.net/user" title="coding" target="_blank">coding</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">Newming.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script><script>window._config = { showScore: true };
(function(){ 
  var appid = 'cytd93gvc'; 
  var conf = '0cc7cd8ba422165ead18a54d72a4ea07'; 
  var width = window.innerWidth || document.documentElement.clientWidth; 
  var nodes =document.getElementsByTagName("head")[0]||document.head||document.documentElement;
  if (/(Android|iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent) && width < 750) {  
      window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>');
  }
  else { 
    var loadJs=function(d,a){
      var b=document.createElement("script");b.setAttribute("type","text/javascript");
      b.setAttribute("charset","UTF-8");
      b.setAttribute("src",d);
      if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}
      nodes.appendChild(b)
    };
    loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); 
  } 
  var loadCss = function(cssString){  
    var style=document.createElement("style");  
    style.setAttribute("type", "text/css");  
    if(style.styleSheet){// IE  
        style.styleSheet.cssText = cssString;  
    } else {// w3c  
        var cssText = document.createTextNode(cssString);  
        style.appendChild(cssText);  
    }
    nodes.appendChild(style);
  }
  window.onload=function(){loadCss('.module-hot-topic,.module-cmt-float-bar{display:none!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .cbox-prompt-w span.prompt-empty-w,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-form-w .form-text-w span.text-null,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-minwidth-w div.cont-comment-w a.comment-link-w,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-minwidth-w div.cont-comment-w span.comment-text-w,#SOHUCS #SOHU_MAIN .module-cmt-footer .section-service-w div.service-wrap-w a:hover,#SOHUCS #SOHU_MAIN .module-cmt-header .section-cbox-w .block-head-w div.header-login,#SOHUCS #SOHU_MAIN .module-cmt-header .section-title-w .title-user-w .user-wrap-w span.wrap-name-w,#SOHUCS #SOHU_MAIN .module-cmt-list .action-click-gw span.click-disable-eg a em.icon-name-bg,#SOHUCS #SOHU_MAIN .module-cmt-list .block-title-gw ul li div.title-name-gw,#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .cmt-list-number .comment-number span.cy-number,#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .cmt-list-number span.comment-number,#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .type-lists li.active,#SOHUCS #SOHU_MAIN .module-cmt-list .msg-wrap-gw .wrap-action-gw .action-click-gw span a:hover,#SOHUCS #SOHU_MAIN .module-cmt-list .picture-box-gw div.box-action-gw a:hover,#SOHUCS #SOHU_MAIN .module-cmt-list .wrap-action-gw .action-click-gw span a:hover em.icon-name-bg,#SOHUCS #SOHU_MAIN .module-cmt-list .wrap-user-gw span.user-name-gw a{color:#40759b!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .post-wrap-border-t div.post-wrap-border-t-r,#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w div.post-wrap-border-l,#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w div.post-wrap-border-r{display:none!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .post-wrap-border-t div.post-wrap-border-t-l{background:#FFF!important;top:-2px!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-function-w .uploading-wrapper-dw div.wrapper-image-dw,#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w div.post-wrap-main,#SOHUCS #SOHU_MAIN .module-cmt-float-bar .wrap-cont-w .cont-form-w div.form-text-w,#SOHUCS #SOHU_MAIN .module-cmt-header .section-cbox-w .block-head-w div.header-login,#SOHUCS #SOHU_MAIN .module-cmt-list .module-cmt-box .post-wrap-w div.post-wrap-main{border:1px solid #e6e6e6!important;border-radius:20px 20px 20px 20px;margin:0!important}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-issue-w .issue-btn-w a .btn-fw{width:130px!important;height:34px!important;line-height:33px!important;font-size:17px!important;background:#5483b1!important;border-radius:20px!important;color:#FFF!important;-webkit-box-shadow:0 -1px 4px #5483b1 inset;box-shadow:0 -1px 10px #5483b1 inset}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-issue-w .issue-btn-w a .btn-fw:before{content:"发表评论"}#SOHUCS #SOHU_MAIN .module-cmt-box .post-wrap-w .wrap-action-w .action-issue-w .issue-btn-w a:hover .btn-fw{color:#40759b!important;background:#FFF!important}#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .type-lists li{background:none!important;border-bottom:1px solid #e6e6e6}#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type .type-lists li.active{border:1px solid #e6e6e6;border-radius:10px 10px 0 0;border-bottom:none}#SOHUCS #SOHU_MAIN .module-cmt-list .block-title-gw ul li .title-name-gw div.title-name-gw-tag{background:#5483b1!important;border-radius:3px}#SOHUCS #SOHU_MAIN .module-cmt-list .cmt-list-type div.cmt-list-border{background-color:#e6e6e6!important}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item{border:1px solid #e6e6e6!important}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item .nt-logo{text-align:center;line-height:40px;border-radius:50%!important;background:#e6e6e6!important}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item .nt-logo:before{content:"畅";font-size:22px;color:#FFF}#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item a.nt-text,#SOHUCS #SOHU_MAIN .module-cmt-notice ul.nt-list li.nt-item a.nt-text i{color:#5483b1!important}#SOHUCS #SOHU_MAIN .module-cmt-header .section-title-w .title-user-w .user-wrap-w{background:#FFF!important}');};
})();</script><script src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script></body></html>